# TCP/IP 4계층

- 장치들이 인터넷 상에서 데이터를 주고 받을때, 쓰는 독립적인 프로토콜의 집합.

## TCP/IP 4계층

- 애플리케이션 (FTP/HTTP/SSH/SMTP/DNS)

  웹서비스, 이메일, 등.. 을 실질적 제공하는 층

  - FTP : 파일 전송
  - HTTP : 웹서비스통신의 기초
  - SSH : 암호화 네트워크 프로토콜
  - SMTP : 메일 프로토콜
  - DNS : 도메인 이름, IP주소 매핑 해주는 서버

- 전송 (TCP/UDP/QUIC)

  1. 애플리케이션 계층에서 받은 메시지 기반 세그먼트, 
  2. 데이터그램으로 데이터를 쪼갬
  3. 데이터가 오류 없이 순서대로 전달되도록 도움을 주는 층
  4. 송신자와 수신자 연결 서비스제공
  5. 인터넷 계층 사이, 데이터 전달 될 때 중계 역할
  6. 연결 지향 통신(TCP)
  7. 신뢰성, 흐름 제어, 혼잡 제어

- 인터넷 (IP/ARP/ICMP)

  1. 한 노드에서 다른 노드로 전송 계층에서 받은 세그먼트 또는 데이터 그램을 패킷화하여, 목적지로 전송하는 역할
  2. 네트워크 패킷을 IP 주소로 지정된 목적지로
  3. 전송하기 위해 사용되는 계층 IP, ARP, ICMP
  4. 패킷 수신할 상대의 주소 지정 데이터 전송

- 링크 (이더넷)

  1. 전선, 광섬유 무선등으로 데이터가 네트워크를 통해 물리적 전송 방식 정의
  2. 실질적 데이터를 전달
  3. 장치 간 신호를 주고 받는 규칙을 정하는 계층 (광섬유, 무선 등..)
  4. 0과 1로 이루어진 데이터를 보내는 계층

## OSI 7계층 vs TCP/IP 4계층 기준 

- 애플리케이션 계층
    - 애플리케이션
    - 프레젠테이션
    - 세션

- 전송 계층
    - 전송

- 인터넷계층
    - 네트워크

- 링크 계층
    - 데이터 링크
    - 물리

## 공통

특정 계층 변경시 다른 계층이 영향 받지 않도록 설계됨
캡슐화와 비캡슐화
캡슐화 : 송신자와, 수신자에게 데이터를 보낼때, 데이터를 각 계층을 지나며, 각 계층의 특징들이 담긴 헤더들이 붙여지는 과정을 의미

## PDU (각 계층의 데이터 단위)

- 애플리케이션 : 메시지
- 전송 계층 : 세그먼트(TCP), 데이터그램(UDP)
- 인터넷 계층 : 패킷
- 링크 계층 : 프레임(데이터 링크 계층), 비트(물리 계층)
- 세그먼트 : 적절한 크기로 쪼갠 조각(세그먼트와 데이터그램의 의미는 같음)
- 패킷 : 세그먼트에 SP와 DP가 포함된 IP헤더가 붙은 형태의 조각
- 프레임 : MAC 주소 헤더와 CRC/체크섬 트레일러가 붙은 조각

IP 헤더
- SP : 송신자의 32 비트 IP주소
- DP : 수신자의 32 비트 IP 주소

IPv4 기준

CRC/체크섬 트레일러

데이터의 오류감지를 위한 수학적 함수가 적용된 값.

링크의 오류(과도한 트래픽 등)으로 인해 데이터 손상을 감지하는 역할

모든 계층에 전달되는 데이터가 쪼개져서 '패킷'으로 전달

## OSI 7계층 vs TCP/IP 4계층
  1. application, presentation, session -> application 계층
  2. transport -> transport 계층
  3. Network -> Internet 계층
  4. ataLink, Physical -> NetworkAccess 계층
 
**즉, 구분 되는 계층이 다르다**
