### 1.프로토콜 스택의 내부 구성

- 애플리케이션 구조 

  - 애플리케이션  
    네트워크 애플리케이션    
    Socket 라이브러리 (리졸버)      

  - OS
    프로토콜 스택  
    TCP, UDP  
      IP (ICMP, ARP)  

  - 드라이버 소프트웨어  
    LAN 드라이버 (LAN 어댑터 제어)  

  - 하드웨어  
    LAN 어댑터  
    

- TCP와 UDP : 데이터 송수신 동작 실행  
    - TCP : 브라우저나 메일 등 일반 적 어플리케이션 사용  
    - UDP : DNS서버와 통신과 같은, 짧은 제어용 데이터 송수신 하는 경우 사용  

- IP 프로토콜 : 인터넷에서 데이터를 패킷형태일때 운반 하는 역할  
    - ICMP : 패킷 운반시 발생하는 오류를 통지 하거나 제어용 메세지 통시지 사용
    - ARP : IP 주소에 대응하는 MAC 주소를 조사할때 사용
      (MAC주소 : LAN 방식의 기기의 주소)

### 2. 소켓의 실체는 통신 제어용 제어 정보

- 프로토콜 스택은 제어정보를 메모리에 저장해 놓는다(IP주소, 포토번호, 진행 상태 등..)  

- 프로토콜 스캑은 소켓의 정보를 기반으로 동작한다.

- netstat -ano
![image](https://user-images.githubusercontent.com/60064392/233994457-eb312d43-67e1-4af8-8655-fb75f8b8b9ee.png)  

- 소켓을 만든다는 동작 : 위의 내용에 한 행을 추가 하는것, 송수신 메모리를 일시 저장을 위한 메모리 준비하는것.  

- netstat -ano 설명  
  - 로컬 주소와 외부주소는 상호 통신 중이라는 것을 표현
    - 로컬 주소 : netstat 명령 실행한 기계의 ip주소, 포트번호
    - 상대 주소 : 통신 상대 측의 ip주소와 포트번호
  - 상태 종류  
    - LISTENING : 접속을 기다리는 상태
    - ESTABLISHED : 접속 동작 끝나고 데이터 통신중  
  - PID : 프로그램 아이디


### 3. Socket을 호출 했을 때의 동작

- Socket : Socket라이브러리  

- socket : socket이라는 프로그램  

- 통신 동작 간략한 정리  
  - DNS 서버 (접속 정보 송수신) -> 소켓 작성 (DNS 정보 기반으로) -> connect (접속) -> write(송신) -> read(수신) -> close(연결끊기/소켓 말소)  
    1. 소켓을 만드는 단계 (소켓 작성) :   
      - socket 호출, 한개의 socket 만듬  
      - 소켓 정보용 메모리 확보  
      - 소켓의 초기 상태임을 나타내는 정보를 메모리 영역에 기록  
      - 소켓 만들어지면, 디스크립터를 애플리케이션에 알려줌.
      - 디스크립터는 어플리케이션의 데이터 송수신 동작시, 사용할 소켓을 선택 하기 위해 디스크립터 이용.  
