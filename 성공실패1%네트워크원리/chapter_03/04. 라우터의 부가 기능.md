### 1. 주소 변환으로 IP 주소를 효율적으로 이용한다.

- 라우터는 부가기능으로 주소변환 기능을 가지고 있다.  

- 주소변환 : 고유 주소를 할당하면서 갯수가 늘어나, 고갈되어 문제가 발생 할 수있음.  
             이 문제를 해결하기 위한 방법 -> 별개의 네트워크에선,고유 주소(글로벌 주소)를 중복 주소(**프라이비트 주소**)로 변환하여 사용한다.  
             
- 프라이비트 주소의 규칙 : 프라이비트 주소로 사내에서 사용하는것은 아래 범위로 한정한다.  
  - 10.0.0.0 ~ 10.255.255.255  
  - 172.16.0.0 ~ 172.31.255.255  
  - 192.168.0.0 ~ 192.168.255.255  

- 프라이비트 주소는 원래 글로벌 주소에 포함되있던 주소중 범위를 정하고 이를 사내에서 사용한다고 약속하는것에 불과하다.  

- 단, 사내에서의 중복은 피해야한다.  

### 2. 주소변환의 기본 동작 

- 주소변환은 패킷을 중계시 ip 헤더에 기재된 ip주소와 포트번호를 바꿔 쓰는것

1. 인터넷 패킷 최초 중계시, 송신처 ip를 프라이비트 주소에서 클로벌 주소로 바꿔 씀
  (주소는 포트에 할당 된 주소로 동시에 포트 번호도 바꿈)

2. 포트 번호 쪽은 미사용 번호를 주소 변환 장치가 적당히 선택 하여 사용

3. 바꿔쓰기 전의 프라이비트 주소와 포트번호, 바꿔쓴후의 글로벌 주소와 포트번호를 한 세트로   
   주소변환장치 내부의 대응표에 기록
   
4. 패킷 송출

5. 회신 패킷의 수신처 주소는 바꿔쓴 글로벌 주소와 포트 번호가 되어있음.

6. 해당 패킷을 주소 변환 장치로 이동.

7. 대응표로, 해당 주소와 포트를 찾아서, 사내 네트워크로 패킷을 보냄

8. 접속이 끝나면 대응표에 있던 글로벌 주소와, 포트 번호를 삭제 함.

### 3. 포트 번호를 바꿔 쓰는 이유

- 단순 주소만 변환시 클로벌 주소와, 프라이비트 주소가 1:1 대응하여, 글로벌 만큼 갯수가 필요하다. 포트를 붙여 주소의 갯수를 늘릴수 있음

### 4. 인터넷에서 회사로 액세스 한다.

- 사내에서 인터넷으로 엑세스 하는 패킷을 중계 할땐 대응표에 송신처의 프라이비트 주소와 포트번호가 없어도, 패킷 중계 가능하다.  
  (주소변환장치와, 포트번호는 비어있는것을 사용하면 되기 떄문)

- 인터넷에서 사내로 패킷을 중계 할땐, 대응표에 등록 되어있지 않으면 중계 할 수 없음.
  이는 부정침입 방지 효과를 가지고 있음
  중계하기 위해서 일부러 수동으로 대응표에 등록해두면 된다.
  - 서버의 프라이비트 주소를 주소 변환장치에 수동 등록함으로서, 프라이비트 주소(글로벌 주소)를 할당한 서버를 공개 할 수도 있다.
    (프라이 비트 주소를 DNS 서버에 등록한다)

### 5. 라우터의 패킷 필터링 기능

- 패킷 필더링 기능 : 패킷을 중계할때 MAC 헤더, IP 헤더, TCP 헤더에 기록 되어있는 내용을 조사,
                    사전에 설정한 조건에 합치 되야 패킷을 중계하거나 폐기하는 동적을 실행한다.
