### 1. 조회의 URI를 실제 파일 명으로 변환한다.

- 웹서버의 경우 read에서 받은 데이터의 내용이 HTTP 리퀘스트 메세지가 된다.  
  받은 메세지에 기록되어있는 내용에 따라 적절한 처리실행, 응답메세지 만듬  
  write를 통해 응답메세지를 클라이언트에 반송한다  
  
- 리퀘스트 메시지에는 메소드라는 일정의 명령과 데이터출처를 나타내는 URI라는 파일의 경로명 같은 것이 있음  
  내용에 따라 데이터의 클라이언트에 반송한다.  
  이 경우 메소드나 URI의 내용에 따라 웹 서버 내부의 동작이 달라진다.
  
- 단순히 URI 경로의 파일을 읽으면 위험하게 되므로, 가상 구조의 디렉토리경로 명을 URI로 작성한다.

- 가상 디렉토리와 실제 디렉토리 대응관계 조사, 해당 파일을 읽어 데이터 반송

- URI 에 쓰여있는 경로명이 파일명을 생략한 경우, 미리 설정한 파일명이 쓰여지는것으로 간주

### 2. CGI 프로그램을 작동하는 경우

- URI에 쓴 파일 내용이 HTML 문서 또는 화상 데이터인 경우 파일의 내용을 그대로  
  응답 메시지로 클라이언트에 반송한다

- URI가 프로그램 파일의 이름을 URI에 쓸수 있으며, 해당 프로그램을 작동  
  프로그램이 출력하는 데이터를 클라이언트에 반송한다.
  
- 프로그램 작동 방식으로 GET과 POST로 리퀘스트 메세지를 보내는 방식이 있다.

- 리퀘스트 메시지를 보낸 웹서버는 URI의 파일명을 프로그램인지, 파일인지 조사한다
  확장자를 확인해서 조사
  
- 프로그램일시, 프로그램 작동하도록 OS에 의뢰   
  -> 리퀘스트 메시지에서 데이터를 추출  
  -> 작동 시킨 프로그램에 건내준다
  
- 응답 데이터를 클라이언트에 다시 건내준다.

### 3. 웹 서버로 수행하는 액세스 제어

- 액세스 제어 : 조건에 따라 액세스 동작 여부설정하는 기능
  
  - 웹 서버에서 주로 조건을 설정하는 3가지
    1. 클라이언트 주소
    2. 클라이언트의 도메인명
    3. 사용자명과 패스워드

- 해당 조건을 데이터 출처가 되는 파일이나 디렉토리와 대응해서 설정한다.
  - 데이터 출처를 판단, 액세스 가능 여부의 조건이 설정 되어있는지 조사,  
    액세스 허가된 경우에만 파일을 읽거나 프로그램을 실행 한다.

- 엑세스 제어 IP 주소로 설정 되어있을 경우 accept로 접속을 접수했을떄, ip주소를 알 수 있어, 점검 한다.

- 클라이언트의 도메인 명이 조건으로 설정 되어있는 경우, 클라이언트의 IP주소와 도메인 명을 DNS 서버 이용 하여 조사
  서버측에서 도메인 명이 조건으로 설정 되어있을 경우에도 웹서버측 DNS 서버와 클라이언트측 DNS서버를 이용하여 조사한다
  - 이유는 웹서버측에 위조된 도메인 명을 보내는 경우가 있기 때문에 이중으로 점검한다.
  
### 4. 응답 메시지를 되돌려 보낸다

- 리퀘스트 메시지에 대해 적절하게 처리하고 처리가 완료 되면 응답 메시지를 반송한다.

- 최초의 클라이언트가 리퀘스트 메시지를 웹 서버에 보내는 동작과 같다.

  1. 웹서버가 Socket 라이브러리의 write를 호출
  2. 응답 메세지를 프로토콜 스택에 건네줌
  3. 소켓에는 통신의 상태가 전부 기록 되어있으므로, 디스크립터를 통해 어떤 소켓을 사용할지 통지
  4. 프로토콜스택은 패킷을 분할, 헤더를 붙여 패킷을 송출

  
  
